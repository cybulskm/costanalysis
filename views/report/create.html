<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cost Analysis for Cars</title>
    <link rel="stylesheet" type="text/css" href="/style/style.css">
</head>

<body>
    <div class="container">
        <h1 class="text-center">Cost Analysis</h1>
        <form method="post" action="/report/create" class="center">
            <div class="section">
                <h3>Principal:</h3>
                <div class="checkbox-box">
                    <label for="taxIncluded">Tax Included (13%):</label>
                    <input type="checkbox" name="taxIncluded" id="taxCheckbox" checked="true"
                        onclick="taxInputSwitch(this.checked)" />
                </div>
                <div class="form-group">
                    <label for="Price">Price:</label>
                    <input name="Price" type="number" id="priceInput" oninput="updateTax()" />
                </div>
                <div class="form-group taxes-group" id="taxBox">
                    <div class="form-group">
                        <label for="taxRate">Tax Rate:</label>
                        <input name="taxRate" type="number" id="taxRate" value="13" oninput="updateTax()" />
                    </div>
                    <div class="form-group">
                        <label for="tax">Taxes:</label>
                        <input name="tax" id="taxInput" type="number" />
                    </div>

                </div>
                <div class="form-group">
                    <label for="Downpayment">Downpayment:</label>
                    <input name="Downpayment" type="number" />
                </div>
                <h3>Monthly:</h3>
                <hr />
                <div class="form-group">
                    <label for="Finacing">Financing (%):</label>
                    <input name="Financing" type="number" placeholder="8.99" step="0.01" />
                </div>
                <div class="form-group">
                    <label for="Insurance">Insurance:</label>
                    <input name="Insurance" type="number" />
                </div>
                <div class="form-group">
                    <label for="Other">Other:</label>
                    <input name="Other" type="number" />
                </div>
            </div>

            <div class="section">
                <h3>Income:</h3>
                <hr />
                <div class="form-group">
                    <label for="Wage">Hourly Wage:</label>
                    <input name="Wage" type="number" />
                </div>
            </div>

            <div class="form-group">
                <input type="submit" value="Submit" class="submit-btn" />
            </div>
        </form>
    </div>
    <script>
        const priceInput = document.getElementById("priceInput");
        const taxInput = document.getElementById("taxInput");
        const taxRate = document.getElementById("taxRate");

        function updateTax() {
            console.log(priceInput.value);
            price = Number(priceInput.value);
            rate = Number(taxRate.value);
            taxInput.value = Math.round(price * rate / 100).toFixed(2);

        }
        function taxInputSwitch(checked) {
            var taxBox = document.getElementById("taxBox");
            console.log(checked);
            if (!checked) {
                taxBox.style.visibility = "visible";
            }
            if (checked) {
                taxBox.style.visibility = "collapse";
            }
        }
    </script>
</body>

</html>